@page "Invitations"
@model StudyroomBookingZealand.Pages.User.Profile.InvitationsModel
@{
    ViewData["Title"] = "Invitations";
}
<h1>Your invitations:</h1>
<div>
    @foreach (Models.Invitation i in Model.InvitationsList)
    {
        <h3 style="margin-bottom: 50px">From @Model.GetUser(i.Sender).FullName's group</h3>
        <div class="container-fluid row">
            <div class="col-2"></div>
            <div class="col-8">
                <div class="container-fluid card col-12" style="background-color: #FFE975">
                    <div class="card-header bg-dark text-white">
                        <h3 style="margin: 0">Group members</h3>
                    </div>
                    <div class="card-body">
                        @{
                            int j = 0;
                            if (Model.GetUser(i.Sender).GroupId != CurrentUser.LoggedUser.GroupId)
                            {
                                foreach (Models.User u in Model.GetStudentsFromGroup(i.Sender))
                                {
                                    <div class="row" style="margin-bottom: 10px">
                                        <div class="col-2" style="display: flex; justify-content: flex-start; align-items: center;">
                                            <img src="" alt="Image"/>
                                        </div>
                                        <p class="col-6 text-dark" style="display: flex; justify-content: center; align-items: center; font-size: 20px; margin-bottom: 0">
                                            @u.FullName
                                        </p>
                                        <div class="col-2" style="display: flex; justify-content: flex-end; align-items: center;">
                                            <p style="margin-bottom: 0">
                                                @if (CurrentUser.LoggedUser.Id == u.Id)
                                                {
                                                    <a class="btn btn-custom btn-dark" asp-page="ProfilePage">View profile</a>
                                                }
                                                else
                                                {
                                                    <a class="btn btn-custom btn-dark" asp-page="ViewProfile" asp-route-id="@u.Id">View profile</a>
                                                }
                                            </p>
                                        </div>
                                        @if (u.Id == @Model.GroupService.GetGroupById(Model.GetUser(i.Sender).GroupId).Owner)
                                        {
                                            <div class="col-2" style="display: flex; justify-content: flex-end; align-items: center; margin-left: -2px">
                                                <i style="font-size: 26px" class="fas fa-crown"></i>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="col-2"></div>
                                        }
                                    </div>

                                }
                            }
                        }
                    </div>
                    <div class="col+40" style="display: flex; justify-content: flex-end; align-items: end;">
                        <form method="post">
                            <input type="submit" class="btn btn-success" value="Accept" asp-page-handler="Accept" asp-route-id="@i.Id" />
                            <input type="submit" class="btn btn-danger" value="Decline" asp-page-handler="Decline" asp-route-id="@i.Id" />
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-2"></div>
        </div>
    }
</div>
